<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Estilos de letra para Portafolio -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <!-- Estilos letra para Portafolio -->
    <link
      href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap"
      rel="stylesheet"
    />
    <!--Texto Presets-->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <!--Texto Serfvicios -->
    <link href="https://fonts.googleapis.com/css2?family=Ewert&family=Oswald:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">


    <!--Texto de Dashboard-->
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">

    <!-- Estilos CSS -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Streetwear&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="canonical"
      href="https://getbootstrap.com/docs/5.3/examples/product/"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"
    />
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <link
      href="/docs/5.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Favicons -->
    <link
      rel="apple-touch-icon"
      href="/docs/5.3/assets/img/favicons/apple-touch-icon.png"
      sizes="180x180"
    />
    <link
      rel="icon"
      href="/docs/5.3/assets/img/favicons/favicon-32x32.png"
      sizes="32x32"
      type="image/png"
    />
    <link
      rel="icon"
      href="/docs/5.3/assets/img/favicons/favicon-16x16.png"
      sizes="16x16"
      type="image/png"
    />
    <link rel="manifest" href="/docs/5.3/assets/img/favicons/manifest.json" />
    <link
      rel="mask-icon"
      href="/docs/5.3/assets/img/favicons/safari-pinned-tab.svg"
      color="#712cf9"
    />
    <link rel="icon" href="/docs/5.3/assets/img/favicons/favicon.ico" />
    <meta name="theme-color" content="#712cf9" />

    <style>
      /* Eliminar márgenes y rellenos por defecto */
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
      }

      /* Ajustes del navbar */
      .navbar-custom {
        background-color: #111111;
      }

      /* Efecto en el logo */
      .navbar-brand img {
        transition: transform 0.3s ease-in-out;
      }

      .navbar-brand img:hover {
        transform: scale(1.1);
      }

      /* Estilo para "Marcus Hinestroza" */
      .navbar-custom .brand-name {
        font-family: "Playfair Display", serif;
        font-size: 1.8rem;
        font-weight: bold;
        color: white;
        transition: color 0.3s ease-in-out;
      }

      .navbar-custom .brand-name:hover {
        color: rgb(31, 23, 120);
      }

      /* Estilos de enlaces en navbar */
      .navbar-custom .navbar-nav .nav-link {
        color: white !important;
        font-size: 1rem;
        font-weight: 600;
        transition: color 0.3s ease-in-out;
      }

      .navbar-custom .navbar-nav .nav-link:hover {
        color: rgb(42, 34, 124) !important;
      }

      /* Responsive: Centrar navbar en móvil */
      @media (max-width: 991px) {
        .navbar-custom .navbar-nav {
          text-align: center;
        }
      }

      /* Estilo del footer */
      .footer-logo-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10px;
      }

      .footer-logo-container img {
        width: 50px;
        height: 50px;
        object-fit: cover;
      }

      /* Asegurarse que el contenido ocupa todo el espacio disponible entre el navbar y el footer */
      .content {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      footer {
        padding-top: 20px;
        padding-bottom: 20px;
      }

      /* Cambiar color de las líneas del navbar-toggler-icon a blanco */
      .navbar-toggler-icon {
        background-color: white;
      }

     
    </style>
  </head>

  <body class="col-12 bg-dark text-white text-center">
    <!-- Mostrar mensajes flash -->
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <div class="container mt-3">
      <div class="row">
        {% for category, message in messages %} {% if category in ['success',
        'error'] %}
        <div class="col-12">
          <div
            class="alert alert-{{ category }} alert-dismissible fade show"
            role="alert"
          >
            {{ message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"
            ></button>
          </div>
        </div>
        {% endif %} {% endfor %}
      </div>
    </div>
    {% endif %} {% endwith %}

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-custom">
      <div class="container">
        <!-- Logo -->
        <a class="navbar-brand" href="{{ url_for('index') }}">
          <img
            src="{{ url_for('static', filename='images/logo.jpg') }}"
            alt="logo"
            width="60"
            height="50"
          />
        </a>

        <!-- Nombre al lado izquierdo -->
        <a class="navbar-brand brand-name ms-2" href="{{ url_for('index') }}"
          >Marcus Hinestroza</a
        >

        <!-- Botón de colapso en móviles -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Menú de navegación -->
        <div
          class="collapse navbar-collapse justify-content-end"
          id="navbarNav"
        >
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('tasks.portafolio') }}"
                >Portafolio</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('tasks.servicios') }}"
                >Servicios</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="{{ url_for('tasks.preguntas_frecuentes') }}"
                >FAQ</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('tasks.about') }}"
                >Acerca de mí</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('tasks.contacto') }}"
                >Contacto</a
              >
            </li>

            <!-- Mostrar el enlace "Administrar" solo si el usuario es admin -->
            {% if current_user.is_authenticated and current_user.role == 'admin'
            %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('admin.admin_panel') }}"
                >Administrar</a
              >
            </li>
            {% endif %}

            <!-- Mostrar los botones solo si el usuario NO está autenticado -->
            {% if not current_user.is_authenticated %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('auth.login') }}"
                >Iniciar Sesión</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('auth.register') }}"
                >Registrarse</a
              >
            </li>
            {% else %}
            <!-- Mostrar el nombre del usuario y botón de cerrar sesión si está autenticado -->
            <li class="nav-item">
              <span class="nav-link">! Hola {{ current_user.username }} !</span>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('auth.logout') }}"
                >Cerrar sesión</a
              >
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <!-- Contenido dinámico -->
    <div class="content">{% block content %} {% endblock %}</div>

    <!-- Mi PIE DE PAGINA BASE -->
    <footer class="bg-black text-white mt-5">
      <div class="container py-4">
        <div class="row d-flex justify-content-between align-items-center">
          <div class="col-12 col-md-4 mb-3">
            <h5>Sobre</h5>
            <ul class="list-unstyled">
              <li><a href="#" class="text-white">Acerca de</a></li>
              <li><a href="#" class="text-white">Blog</a></li>
            </ul>
          </div>
          <div class="col-12 col-md-4 mb-3 text-center">
            <h5>Síguenos</h5>
            <a href="https://www.facebook.com/" class="text-white me-3">
              <i class="bi bi-facebook" style="font-size: 1.5rem"></i> Facebook
            </a>
            <a href="https://www.instagram.com/" class="text-white me-3">
              <i class="bi bi-instagram" style="font-size: 1.5rem"></i>
              Instagram
            </a>
            <a href="https://www.youtube.com/" class="text-white">
              <i class="bi bi-youtube" style="font-size: 1.5rem"></i> YouTube
            </a>
          </div>
          <div class="col-12 col-md-4 mb-3 text-center">
            <div class="footer-logo-container w-40">
              <div class="text-white"></div>
              <img
                src="{{ url_for('static', filename='images/MHT1.webp') }}"
                class="d-floating"
                alt="Aclog logo"
              />
            </div>
          </div>
          <div class="col-12 text-center">
            <h5>© 2025</h5>
            <p>All rights reserved</p>
          </div>
        </div>
      </div>
    </footer>


 <!-- Modal de aviso de expiración de sesión -->
<div class="modal fade" id="sessionModal" tabindex="-1" aria-labelledby="sessionModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="sessionModalLabel">Tu sesión está por expirar</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Tu sesión está a punto de expirar. ¿Te gustaría continuar para evitar que se cierre?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar sesión</button>
        <button type="button" class="btn btn-primary" id="extendSessionBtn">Continuar sesión</button>
      </div>
    </div>
  </div>
</div>

    
<script>
  // Obtener el modal y el botón para extender la sesión
  const extendSessionBtn = document.getElementById('extendSessionBtn');
  
  // Evento que se dispara cuando se hace clic en el botón "Continuar sesión"
  extendSessionBtn.addEventListener('click', function() {
    // Aquí hacemos una solicitud POST al servidor para actualizar la sesión
    fetch('/update-session', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-CSRFToken': document.querySelector('meta[name="csrf-token"]').getAttribute('content') // Si tienes CSRF activado
      }
    })
    .then(response => {
      if (response.ok) {
        // Si la sesión se extendió correctamente, cerramos el modal
        $('#sessionModal').modal('hide');
        alert("Tu sesión ha sido extendida.");
      } else {
        alert("Hubo un problema al intentar extender tu sesión.");
      }
    })
    .catch(error => {
      console.error('Error al extender la sesión:', error);
      alert("Hubo un error al intentar extender tu sesión.");
    });
  });
</script>



  </body>
</html>
